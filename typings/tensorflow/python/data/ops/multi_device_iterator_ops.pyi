from tensorflow.python.data.ops import dataset_ops as dataset_ops, iterator_ops as iterator_ops
from tensorflow.python.data.util import structure as structure
from tensorflow.python.eager import context as context, function as function
from tensorflow.python.framework import composite_tensor as composite_tensor, dtypes as dtypes, errors as errors, ops as ops, tensor_spec as tensor_spec, type_spec as type_spec
from tensorflow.python.ops import array_ops as array_ops, control_flow_ops as control_flow_ops, functional_ops as functional_ops, gen_dataset_ops as gen_dataset_ops, resource_variable_ops as resource_variable_ops
from typing import Any, Optional

class _PerDeviceGenerator(dataset_ops.DatasetV2):
    def __init__(self, shard_num: Any, multi_device_iterator_resource: Any, incarnation_id: Any, source_device: Any, element_spec: Any): ...
    @property
    def element_spec(self): ...

class _ReincarnatedPerDeviceGenerator(dataset_ops.DatasetV2):
    def __init__(self, per_device_dataset: Any, incarnation_id: Any) -> None: ...
    @property
    def element_spec(self): ...

class MultiDeviceIterator:
    def __init__(self, dataset: Any, devices: Any, max_buffer_size: int = ..., prefetch_buffer_size: int = ..., source_device: str = ...) -> None: ...
    def get_next(self, device: Optional[Any] = ...): ...
    def get_next_as_optional(self): ...
    @property
    def initializer(self): ...
    @property
    def element_spec(self): ...

class MultiDeviceIteratorResourceDeleter:
    def __init__(self, multi_device_iterator: Any, iterators: Any, device: Any, deleter: Any) -> None: ...
    def __del__(self) -> None: ...

class MultiDeviceIteratorSpec(type_spec.TypeSpec):
    def __init__(self, devices: Any, source_device: Any, element_spec: Any) -> None: ...
    @property
    def value_type(self): ...
    @staticmethod
    def from_value(value: Any): ...

class OwnedMultiDeviceIterator(composite_tensor.CompositeTensor):
    def __init__(self, dataset: Optional[Any] = ..., devices: Optional[Any] = ..., max_buffer_size: int = ..., prefetch_buffer_size: int = ..., source_device: str = ..., components: Optional[Any] = ..., element_spec: Optional[Any] = ...) -> None: ...
    def get_next(self, device: Optional[Any] = ...): ...
    def __iter__(self) -> Any: ...
    def __next__(self): ...
    def next(self): ...
    def get_next_as_optional(self): ...
    @property
    def element_spec(self): ...
